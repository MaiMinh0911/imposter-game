<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Imposter Game</title>
  <style>
    /* --- Page styling --- */
    :root{ --bg1:#07142a; --bg2:#123a66; --panel: rgba(255,255,255,0.04); --accent:#ffea70; --btn:#ff5b5b }
    html,body{height:100%; margin:0; font-family:Inter, system-ui, Arial, sans-serif; background: linear-gradient(180deg,var(--bg1),var(--bg2)); color:#fff}
    .wrap{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px; box-sizing:border-box; overflow:hidden}

    .container{width:100%; max-width:460px; background:var(--panel); border-radius:14px; padding:26px; box-shadow:0 10px 30px rgba(0,0,0,0.4);}
    h2{margin:2px 0 6px 0; color:var(--accent); text-align:center}
    label{display:block; margin-top:16px; margin-bottom:6px; color:rgba(255,255,255,0.9)}

    input[type=number], select, button{width:100%; padding:12px; border-radius:10px; border:none; box-sizing:border-box; font-size:15px}
    input[type=number], select{background:#f4f6f9; color:#111}
    .controls{display:flex; gap:10px; margin-top:14px}
    .controls button{flex:1}

    button.primary{background:var(--accent); color:#111; font-weight:700}
    button.ghost{background:transparent; border:1px solid rgba(255,255,255,0.06); color:#fff}

    /* Hidden full-screen reveal overlay */
    #hiddenScreen{display:none; position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:60}
    #hiddenInner{width:100%; max-width:420px; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.06)); padding:28px; border-radius:12px; text-align:center}
    #starCover{background:linear-gradient(90deg,#fff8cc,#fff1c6); color:#b30000; padding:12px 18px; border-radius:999px; display:inline-block; font-weight:800}
    #revealButton{margin-top:18px; background:#4caf50; color:white; padding:12px; border-radius:10px; font-weight:700}
    #roleDisplay{display:none; margin-top:18px; font-size:20px}
    #roleDisplay strong.word{display:block; margin-top:12px; font-size:34px; color:#d8ffd8}
    #nextPlayerBtn{margin-top:18px; display:none; padding:10px 14px; border-radius:10px;}

    /* Snowflake styling */
    .snowflake{position:fixed; top:-10vh; color:rgba(255,255,255,0.9); user-select:none; pointer-events:none; animation:fall linear infinite}
    @keyframes fall{0%{transform:translateY(-10vh) translateX(0); opacity:1}100%{transform:translateY(110vh) translateX(40px); opacity:0}}

    /* Responsive tweaks */
    @media (max-width:420px){ #roleDisplay strong.word{font-size:28px} #hiddenInner{padding:20px} }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="container" id="setupScreen">
      <h2>üéÑ Imposter Game ‚Äî Office Edition</h2>
      <p style="opacity:0.9; text-align:center; margin-top:6px">Choose players & category ‚Äî pass the device. Each player taps to reveal their role privately.</p>

      <label for="playerCount">Number of players</label>
      <input id="playerCount" type="number" min="3" max="20" value="6" />

      <label for="categorySelect">Category</label>
      <select id="categorySelect">
        <option value="christmas">Christmas</option>
        <option value="office">Office</option>
        <option value="sports">Sports</option>
        <option value="family">Family</option>
      </select>

      <div class="controls">
        <button class="primary" id="startBtn">Start Game</button>
        <button class="ghost" id="demoBtn">Quick Demo</button>
      </div>
    </div>
  </div>

  <!-- Full-screen reveal modal (hidden until game starts) -->
  <div id="hiddenScreen" aria-hidden="true">
    <div id="hiddenInner">
      <div id="starCover">‚≠êÔ∏è Tap to reveal ‚≠êÔ∏è</div>
      <button id="revealButton">Reveal</button>

      <div id="roleDisplay"><div id="roleText"></div><strong class="word" id="wordText"></strong></div>
      <button id="nextPlayerBtn" class="ghost">Next Player</button>
    </div>
  </div>

<script>
// --- Word lists ---
const words = {
  christmas: ["snow","santa","reindeer","cookie","gift","tree","bells","lights","stocking","winter"],
  office: ["email","deadline","coffee","meeting","printer","budget","spreadsheet","presentation","manager","laptop"],
  sports: ["soccer","tennis","running","boxing","cycling","golf","swimming","baseball","basketball","volleyball"],
  family: ["mother","father","sister","brother","dinner","holiday","laugh","cousin","grandma","tradition"]
};

// Hint keywords (keyword-style hints for impostor)
const hintKeywords = {
  christmas: ["snow","gift","tree","lights"],
  office: ["work","task","email","coffee"],
  sports: ["team","run","ball","score"],
  family: ["home","love","dinner","laugh"]
};

// --- State ---
let selectedWord = "";
let imposterIndex = -1;
let totalPlayers = 0;
let currentPlayer = 1;
let category = 'christmas';

// DOM refs
const startBtn = document.getElementById('startBtn');
const demoBtn = document.getElementById('demoBtn');
const hiddenScreen = document.getElementById('hiddenScreen');
const revealButton = document.getElementById('revealButton');
const starCover = document.getElementById('starCover');
const roleDisplay = document.getElementById('roleDisplay');
const roleText = document.getElementById('roleText');
const wordText = document.getElementById('wordText');
const nextPlayerBtn = document.getElementById('nextPlayerBtn');

// Attach handlers after DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  startBtn.addEventListener('click', () => startGame(false));
  demoBtn.addEventListener('click', () => { document.getElementById('playerCount').value = 4; startGame(true); });
  revealButton.addEventListener('click', revealRole);
  nextPlayerBtn.addEventListener('click', nextPlayer);

  // Start snow generator
  setInterval(createSnowflake, 220);
});

// --- Game functions ---
function startGame(isDemo = false){
  const sel = document.getElementById('categorySelect');
  category = sel.value || 'christmas';
  totalPlayers = Math.max(3, Math.min(20, parseInt(document.getElementById('playerCount').value) || 6));

  // pick a word and an imposter
  const list = words[category] || words.christmas;
  selectedWord = list[Math.floor(Math.random() * list.length)];
  imposterIndex = Math.floor(Math.random() * totalPlayers) + 1; // 1-based index

  currentPlayer = 1;

  // show overlay modal
  hiddenScreen.style.display = 'flex';
  hiddenScreen.setAttribute('aria-hidden','false');
  resetHidden();
}

function resetHidden(){
  // prepare for current player
  starCover.style.display = 'inline-block';
  revealButton.style.display = 'inline-block';
  roleDisplay.style.display = 'none';
  nextPlayerBtn.style.display = 'none';
  roleText.innerHTML = '';
  wordText.innerText = '';
  // show hint to instruct player (not revealing content)
  starCover.innerText = `Player ${currentPlayer} ‚Äî Tap to reveal`;
}

function revealRole(){
  // hide star cover and reveal content
  starCover.style.display = 'none';
  revealButton.style.display = 'none';
  roleDisplay.style.display = 'block';

  if (currentPlayer === imposterIndex){
    const pool = hintKeywords[category] || ['hint'];
    const randomHint = pool[Math.floor(Math.random() * pool.length)];
    roleText.innerHTML = '‚ùó You are the IMPOSTER!';
    wordText.innerText = randomHint; // show hint as small keyword
  } else {
    roleText.innerHTML = 'Your word is:';
    wordText.innerText = selectedWord.toUpperCase();
  }

  // if not last player, show Next button
  if (currentPlayer < totalPlayers){
    nextPlayerBtn.style.display = 'inline-block';
    nextPlayerBtn.innerText = 'Hide & Pass';
  } else {
    nextPlayerBtn.style.display = 'inline-block';
    nextPlayerBtn.innerText = 'All Revealed ‚Äî Close';
  }
}

function nextPlayer(){
  // if last player, close overlay and let group play
  if (currentPlayer >= totalPlayers){
    hiddenScreen.style.display = 'none';
    hiddenScreen.setAttribute('aria-hidden','true');
    // reset for next possible round
    return;
  }

  // move to next player
  currentPlayer += 1;
  resetHidden();
}

// --- Snowflake generator ---
function createSnowflake(){
  const s = document.createElement('div');
  s.className = 'snowflake';
  s.textContent = '‚ùÑ';
  const size = (Math.random() * 18) + 10; s.style.fontSize = size + 'px';
  s.style.left = (Math.random() * 100) + 'vw';
  s.style.opacity = (Math.random() * 0.6) + 0.4;
  s.style.animationDuration = (Math.random() * 6 + 6) + 's';
  document.body.appendChild(s);
  setTimeout(() => s.remove(), 14000);
}
</script>
</body>
</html>
