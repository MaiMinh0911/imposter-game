<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Office Imposter ‚Äî Pass Around</title>

<style>
  :root{
    --red:#b71c1c; --green:#2e7d32; --gold:#ffd700; --white:#ffffff;
    --card-bg: rgba(255,255,255,0.06);
  }
  html,body{height:100%; margin:0; font-family:Inter, "Poppins", system-ui, Arial; -webkit-font-smoothing:antialiased;}
  body{
    display:flex; align-items:center; justify-content:center;
    background: linear-gradient(135deg,var(--red), #d84315, var(--green));
    color:var(--white);
    padding:24px;
  }

  .container{
    width:100%;
    max-width:460px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.06));
    border-radius:14px;
    padding:20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.35);
    position:relative;
  }

  h1{
    margin:2px 0 12px 0;
    font-size:22px;
    color:var(--gold);
    text-align:center;
    text-shadow:0 2px 6px rgba(0,0,0,0.4);
  }

  p.lead{margin:6px 0 18px 0; text-align:center; opacity:0.95;}

  label{display:block; font-size:13px; margin-top:8px; opacity:0.95;}
  select,input[type="number"]{
    width:100%;
    padding:10px 12px;
    margin-top:8px;
    border-radius:10px;
    border:none;
    background:var(--card-bg);
    color:var(--white);
    box-sizing:border-box;
    font-size:15px;
  }

  .controls{display:flex; gap:10px; margin-top:14px;}
  button{
    flex:1;
    padding:11px 12px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    font-weight:600;
    font-size:15px;
  }
  .btn-start{background:var(--gold); color:#2b2b2b;}
  .btn-ghost{background:rgba(255,255,255,0.08); color:var(--white);}

  /* reveal card */
  .card{
    margin-top:18px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
    border-radius:12px;
    padding:18px;
    min-height:160px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    position:relative;
    overflow:hidden;
  }

  .player-label{font-size:18px; margin-bottom:8px; opacity:0.95;}
  .role-text{font-size:28px; font-weight:700; color:#fff; text-shadow:0 3px 10px rgba(0,0,0,0.5);}

  .keyword{color:#c8f7c5; font-size:34px; font-weight:800; letter-spacing:0.6px;}

  /* star overlay */
  .overlay{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    background: linear-gradient(135deg, rgba(255,215,0,0.12), rgba(255,255,255,0.03));
    z-index:40;
    cursor:pointer;
    flex-direction:column;
    gap:12px;
    backdrop-filter: blur(2px);
  }
  .overlay .badge{
    background: rgba(255,255,255,0.92);
    color:#b30000;
    padding:10px 18px;
    border-radius:999px;
    font-weight:700;
    box-shadow:0 6px 20px rgba(0,0,0,0.3);
  }
  .overlay .subtitle{font-size:13px; color:rgba(0,0,0,0.65); font-weight:600;}

  /* small helper screens */
  .pass-screen{display:none; margin-top:12px; font-size:15px; color:rgba(255,255,255,0.95); text-align:center;}
  .end-actions{display:flex; gap:10px; margin-top:14px;}
  .btn-next{background:#2e7d32; color:white;}
  .btn-discuss{background:#37474f; color:white;}

  /* responsive */
  @media (max-width:420px){
    .container{padding:14px;}
    .role-text{font-size:22px;}
    .keyword{font-size:28px;}
  }

  /* subtle star sparkle animation inside overlay using pseudo-elements */
  .overlay::before, .overlay::after{
    content:"‚ú∂ ‚ú¶ ‚ú∑ ‚ú∏";
    position:absolute;
    top:8px; left:12px;
    font-size:16px;
    opacity:0.12;
    transform:rotate(-12deg);
  }
  .overlay::after{right:12px; left:auto; top:auto; bottom:12px; transform:rotate(8deg); opacity:0.10;}
</style>
</head>
<body>

<div class="container" id="app">
  <h1>üéÑ Office Imposter ‚Äî Pass Around</h1>
  <p class="lead">Choose a category and how many players. Pass the device ‚Äî each player will tap to reveal their role privately.</p>

  <!-- SETUP -->
  <div id="setup">
    <label>Category</label>
    <select id="category">
      <option value="christmas">Christmas</option>
      <option value="finance">Finance</option>
      <option value="family">Family</option>
      <option value="sports">Sports</option>
      <option value="office">Office</option>
    </select>

    <label>Number of players</label>
    <input id="playerCount" type="number" min="3" max="20" value="6" />

    <div class="controls">
      <button class="btn-start" id="startBtn">Start Game</button>
      <button class="btn-ghost" id="demoBtn">Quick Demo</button>
    </div>
  </div>

  <!-- PLAY AREA -->
  <div id="play" style="display:none;">
    <div class="card">
      <div class="player-label" id="playerLabel">Player 1 ‚Äî Tap to reveal</div>

      <!-- overlay (stars) -->
      <div class="overlay" id="overlay" onclick="handleOverlayClick()">
        <div class="badge">‚≠ê TAP TO REVEAL ‚≠ê</div>
        <div class="subtitle">Keep the screen facing you ‚Äî don't peek!</div>
      </div>

      <!-- revealed content -->
      <div id="revealContent" style="text-align:center;">
        <div class="role-text" id="roleText" style="display:none;">
          <!-- either keyword or imposter -->
          <div id="keywordLine" style="display:none;">
            <div style="font-size:13px; opacity:0.9; margin-bottom:6px;">Keyword</div>
            <div class="keyword" id="keyword">COFFEE</div>
          </div>

          <div id="imposterLine" style="display:none; color:#ffd7d7;">
            <div style="font-size:13px; opacity:0.9; margin-bottom:6px;">Role</div>
            <div style="font-size:30px; font-weight:900;">YOU ARE THE IMPOSTER</div>
          </div>
        </div>

        <!-- action buttons -->
        <div id="afterRevealControls" style="display:none; margin-top:18px;">
          <button onclick="hideAndPass()" class="btn-ghost">Hide & Pass</button>
        </div>
      </div>
    </div>

    <!-- Pass / next player helper -->
    <div class="pass-screen" id="passScreen">
      <div id="passText">Pass device to next player...</div>
    </div>

    <!-- End-of-round actions -->
    <div id="endActions" style="display:none; margin-top:12px; text-align:center;">
      <div style="font-weight:700; margin-bottom:8px;">All players have revealed their roles.</div>
      <div class="end-actions">
        <button class="btn-discuss" onclick="startDiscussion()">Start Discussion</button>
        <button class="btn-next" onclick="nextRound()">Next Round</button>
      </div>
    </div>
  </div>

</div>

<script>
/* ======== WORD LIST (single-word, office-friendly) ======== */
const words = {
  christmas: ["tree","gift","snow","santa","reindeer","stocking","cookie","holiday","fireplace","bells","lights","carol"],
  finance: ["salary","budget","invoice","tax","bonus","credit","expense","profit","audit","balance","asset","shares"],
  family: ["mother","father","siblings","dinner","holiday","grandma","home","weekend","cousin","tradition","birthday","vacation"],
  sports: ["football","basketball","running","tennis","swimming","cycling","yoga","gym","training","trophy","coach","marathon"],
  office: ["meeting","deadline","coffee","laptop","printer","kpi","presentation","spreadsheet","breaktime","lunch","overtime","boss","promotion"]
};

/* ======== STATE ======== */
let totalPlayers = 0;
let currentPlayer = 1;
let imposterIndex = -1;
let chosenWord = "";
let category = "christmas";

/* ======== DOM ======== */
const setupEl = document.getElementById("setup");
const playEl = document.getElementById("play");
const playerLabel = document.getElementById("playerLabel");
const overlay = document.getElementById("overlay");
const roleText = document.getElementById("roleText");
const keywordLine = document.getElementById("keywordLine");
const imposterLine = document.getElementById("imposterLine");
const keywordEl = document.getElementById("keyword");
const afterRevealControls = document.getElementById("afterRevealControls");
const passScreen = document.getElementById("passScreen");
const passText = document.getElementById("passText");
const endActions = document.getElementById("endActions");
const revealContent = document.getElementById("revealContent");
const startBtn = document.getElementById("startBtn");
const demoBtn = document.getElementById("demoBtn");
const categorySelect = document.getElementById("category");
const playerCountInput = document.getElementById("playerCount");

/* ======== START / SETUP ======== */
startBtn.addEventListener("click", () => {
  startGame();
});
demoBtn.addEventListener("click", () => {
  // small demo: 4 players for quick test
  playerCountInput.value = 4;
  startGame(true);
});

function startGame(isDemo=false){
  category = categorySelect.value || "christmas";
  totalPlayers = Math.max(3, Math.min(20, Number(playerCountInput.value) || 5));
  // choose random word from chosen category
  const list = words[category] || words.christmas;
  chosenWord = list[Math.floor(Math.random()*list.length)].toUpperCase();

  // randomly pick imposter index (1..totalPlayers)
  imposterIndex = Math.floor(Math.random()*totalPlayers) + 1;

  // reset state
  currentPlayer = 1;
  setupEl.style.display = "none";
  playEl.style.display = "block";
  endActions.style.display = "none";
  passScreen.style.display = "none";
  revealContent.style.opacity = "1";

  // prepare UI for first player
  showPlayerPrompt();
}

/* ======== UI FLOW ======== */
function showPlayerPrompt(){
  // show "Player X ‚Äî Tap to reveal"
  playerLabel.innerText = `Player ${currentPlayer} ‚Äî Tap to reveal`;
  // ensure overlay is visible and reveal content is hidden
  overlay.style.display = "flex";
  roleText.style.display = "none";
  afterRevealControls.style.display = "none";
  keywordLine.style.display = "none";
  imposterLine.style.display = "none";
  passScreen.style.display = "none";
  endActions.style.display = "none";
}

/* Called when overlay (star card) is clicked */
function handleOverlayClick(){
  // reveal the role
  overlay.style.display = "none";
  revealRoleForCurrentPlayer();
}

/* reveal logic */
function revealRoleForCurrentPlayer(){
  roleText.style.display = "block";
  if(currentPlayer === imposterIndex){
    // imposter
    keywordLine.style.display = "none";
    imposterLine.style.display = "block";
  } else {
    // show keyword
    imposterLine.style.display = "none";
    keywordLine.style.display = "block";
    keywordEl.innerText = chosenWord;
  }
  afterRevealControls.style.display = "block";
}

/* Hide & Pass button -> show pass screen then move to next player */
function hideAndPass(){
  // hide reveal content, show a friendly pass message
  roleText.style.display = "none";
  afterRevealControls.style.display = "none";
  passScreen.style.display = "block";

  // If this was the last player, show end actions instead of "pass to next"
  if(currentPlayer >= totalPlayers){
    passText.innerText = "All players have viewed their roles.";
    endActions.style.display = "flex";
    // give a short delay so players can read the message
    setTimeout(() => {
      passScreen.style.display = "none";
      endActions.style.display = "flex";
    }, 800);
    return;
  }

  const nextPlayerNum = currentPlayer + 1;
  passText.innerText = `Pass the device to Player ${nextPlayerNum}. Tap anywhere when ready.`;

  // wait for user to tap to continue
  // overlay will be re-shown when continuing
  // temporarily attach a one-time click listener on passScreen to proceed
  const cont = () => {
    passScreen.removeEventListener("click", cont);
    currentPlayer++;
    showPlayerPrompt();
  };
  passScreen.addEventListener("click", cont);
}

/* Start discussion (just an informative stub) */
function startDiscussion(){
  endActions.style.display = "none";
  passScreen.style.display = "block";
  passText.innerText = "Discussion started ‚Äî accuse, defend, and vote!";
}

/* Start a fresh round with same player count (new word & imposter) */
function nextRound(){
  // new chosen word + new imposter
  const list = words[category] || words.christmas;
  chosenWord = list[Math.floor(Math.random()*list.length)].toUpperCase();
  imposterIndex = Math.floor(Math.random()*totalPlayers) + 1;
  currentPlayer = 1;
  endActions.style.display = "none";
  passScreen.style.display = "none";
  showPlayerPrompt();
}

/* Safety: prevent accidental long presses revealing overlays on mobile when passScreen is visible */
passScreen.addEventListener("touchstart", (e)=>{ e.preventDefault(); }, {passive:false});

</script>
</body>
</html>
